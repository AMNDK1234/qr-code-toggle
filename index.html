<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>QR Code Generator</title>
  <script src="qrious.min.js"></script>
  <style>
    body { font-family: Arial; padding: 20px; }
    .qr-block { margin-bottom: 40px; }
  </style>
</head>
<body>
  <h1>Multi QR Code Generator</h1>

  <div id="qr-codes"></div>

  <script>
    let qrData;

    async function loadStatus() {
      const res = await fetch("status.json");
      qrData = await res.json();
      renderQRs();
    }

    function renderQRs() {
      const container = document.getElementById("qr-codes");
      container.innerHTML = "";
      qrData.codes.forEach((code, index) => {
        const div = document.createElement("div");
        div.className = "qr-block";

        const qr = new QRious({
          value: `${location.origin}/active-page.html?id=${code.id}`,
          size: 200
        });

        const canvas = qr.canvas;

        const link = document.createElement("a");
        link.href = canvas.toDataURL("image/jpeg");
        link.download = `${code.id}.jpeg`;
        link.textContent = "Download QR JPEG";

        div.innerHTML = `
          <h3>QR Code: ${code.id}</h3>
          <p>Destination: ${code.destination}</p>
          <p>Status: ${code.active ? "✅ Active" : "❌ Inactive"}</p>
          <a href="toggle.html?id=${code.id}">Toggle QR On/Off</a><br/><br/>
        `;
        div.appendChild(canvas);
        div.appendChild(document.createElement("br"));
        div.appendChild(link);

        container.appendChild(div);
      });
    }

    loadStatus();
  </script>
</body>
</html>



